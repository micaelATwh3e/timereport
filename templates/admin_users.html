{% extends "base.html" %}

{% block title %}{{ _('Manage users') }}{% endblock %}

{% block content %}
<h2>ğŸ‘¤ {{ _('Manage users') }}</h2>

<div style="background: #fafafa; padding: 25px; border: 1px solid #ddd; margin-bottom: 30px;">
    <h3>{{ _('Add new user') }}</h3>
    <form method="POST" action="{{ url_for('admin_add_user') }}">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>{{ _('Username') }}</label>
                <input type="text" name="username" required>
            </div>
            
            <div class="form-group">
                <label>{{ _('Email') }}</label>
                <input type="email" name="email" required>
            </div>
        </div>
        
        <div class="form-group">
            <label>{{ _('Password') }}</label>
            <input type="password" name="password" required>
        </div>
        
        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" name="is_admin" style="width: auto;">
                {{ _('Admin rights') }}
            </label>
        </div>
        
        <button type="submit" class="btn">{{ _('Create user') }}</button>
    </form>
</div>

<h3>{{ _('All users') }}</h3>
<table>
    <thead>
        <tr>
            <th>{{ _('Username') }}</th>
            <th>{{ _('Email') }}</th>
            <th>{{ _('Role') }}</th>
            <th>{{ _('Action') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>
                <strong>{{ user.username }}</strong>
                {% if user.id == current_user.id %}
                    <span style="color: #667eea; font-size: 12px;">({{ _('You') }})</span>
                {% endif %}
            </td>
            <td>{{ user.email }}</td>
            <td>
                {% if user.is_admin %}
                    <span style="color: #dc3545; font-weight: bold;">ğŸ‘‘ {{ _('Admin') }}</span>
                {% else %}
                    <span style="color: #6c757d;">{{ _('User') }}</span>
                {% endif %}
            </td>
            <td>
                {% if user.id != current_user.id %}
                    <a href="{{ url_for('admin_toggle_admin', user_id=user.id) }}" class="btn btn-secondary" style="margin-right: 10px;">
                        {% if user.is_admin %}{{ _('Remove admin') }}{% else %}{{ _('Make admin') }}{% endif %}
                    </a>
                    <a href="{{ url_for('admin_delete_user', user_id=user.id) }}" 
                       class="btn btn-danger"
                       onclick="return confirm('{{ _('Are you sure you want to delete user') }} {{ user.username }}?')">
                        {{ _('Delete') }}
                    </a>
                {% else %}
                    <span style="color: #999; font-style: italic;">-</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div style="margin-top: 30px; padding: 20px; background: #fffbf0; border: 1px solid #e6d9a3;">
    <strong>â„¹ï¸ {{ _('Information') }}:</strong>
    <ul style="margin-top: 10px; margin-left: 20px;">
        <li>{{ _('Only admins can add and manage users') }}</li>
        <li>{{ _('You cannot delete or change your own admin status') }}</li>
        <li>{{ _('New users must be created by an administrator') }}</li>
    </ul>
</div>
{% endblock %}
