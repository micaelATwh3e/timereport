{% extends "base.html" %}

{% block title %}AnvÃ¤ndarhantering{% endblock %}

{% block content %}
<h2>ğŸ‘¤ AnvÃ¤ndarhantering</h2>

<div style="background: #fafafa; padding: 25px; border: 1px solid #ddd; margin-bottom: 30px;">
    <h3>LÃ¤gg till ny anvÃ¤ndare</h3>
    <form method="POST" action="{{ url_for('admin_add_user') }}">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>AnvÃ¤ndarnamn</label>
                <input type="text" name="username" required>
            </div>
            
            <div class="form-group">
                <label>E-post</label>
                <input type="email" name="email" required>
            </div>
        </div>
        
        <div class="form-group">
            <label>LÃ¶senord</label>
            <input type="password" name="password" required>
        </div>
        
        <div class="form-group">
            <label style="display: flex; align-items: center; gap: 10px;">
                <input type="checkbox" name="is_admin" style="width: auto;">
                AdministratÃ¶r
            </label>
        </div>
        
        <button type="submit" class="btn">LÃ¤gg till anvÃ¤ndare</button>
    </form>
</div>

<h3>Alla anvÃ¤ndare</h3>
<table>
    <thead>
        <tr>
            <th>AnvÃ¤ndarnamn</th>
            <th>E-post</th>
            <th>Roll</th>
            <th>Ã…tgÃ¤rder</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td>
                <strong>{{ user.username }}</strong>
                {% if user.id == current_user.id %}
                    <span style="color: #667eea; font-size: 12px;">(Du)</span>
                {% endif %}
            </td>
            <td>{{ user.email }}</td>
            <td>
                {% if user.is_admin %}
                    <span style="color: #dc3545; font-weight: bold;">ğŸ‘‘ AdministratÃ¶r</span>
                {% else %}
                    <span style="color: #6c757d;">AnvÃ¤ndare</span>
                {% endif %}
            </td>
            <td>
                {% if user.id != current_user.id %}
                    <a href="{{ url_for('admin_toggle_admin', user_id=user.id) }}" class="btn btn-secondary" style="margin-right: 10px;">
                        {% if user.is_admin %}Ta bort admin{% else %}GÃ¶r admin{% endif %}
                    </a>
                    <a href="{{ url_for('admin_delete_user', user_id=user.id) }}" 
                       class="btn btn-danger"
                       onclick="return confirm('Ã„r du sÃ¤ker pÃ¥ att du vill ta bort anvÃ¤ndaren {{ user.username }}?')">
                        Ta bort
                    </a>
                {% else %}
                    <span style="color: #999; font-style: italic;">-</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div style="margin-top: 30px; padding: 20px; background: #fffbf0; border: 1px solid #e6d9a3;">
    <strong>â„¹ï¸ Information:</strong>
    <ul style="margin-top: 10px; margin-left: 20px;">
        <li>Endast administratÃ¶rer kan lÃ¤gga till och hantera anvÃ¤ndare</li>
        <li>Du kan inte ta bort eller Ã¤ndra din egen administratÃ¶rsstatus</li>
        <li>Nya anvÃ¤ndare mÃ¥ste skapas av en administratÃ¶r</li>
    </ul>
</div>
{% endblock %}
