{% extends "base.html" %}

{% block title %}FrÃ¥nvaro{% endblock %}

{% block content %}
<h2>FrÃ¥nvaro - Semester & Sjukdom</h2>

<div style="background: #fafafa; padding: 25px; border: 1px solid #ddd; margin-bottom: 30px;">
    <h3>Registrera frÃ¥nvaro</h3>
    <form method="POST" action="{{ url_for('add_leave') }}">
        <div class="form-group">
            <label>Typ av frÃ¥nvaro</label>
            <select name="leave_type" required>
                <option value="vacation">ğŸ–ï¸ Semester</option>
                <option value="sickness">ğŸ¤’ Sjukdom</option>
            </select>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label>Startdatum</label>
                <input type="date" name="start_date" required>
            </div>
            
            <div class="form-group">
                <label>Slutdatum</label>
                <input type="date" name="end_date" required>
            </div>
        </div>
        
        <div class="form-group">
            <label>Beskrivning (valfritt)</label>
            <textarea name="description" rows="2"></textarea>
        </div>
        
        <button type="submit" class="btn">Registrera frÃ¥nvaro</button>
    </form>
</div>

<h3>Din frÃ¥nvaro</h3>
{% if leaves %}
<table>
    <thead>
        <tr>
            <th>Typ</th>
            <th>Startdatum</th>
            <th>Slutdatum</th>
            <th>Antal dagar</th>
            <th>Beskrivning</th>
            <th>Ã…tgÃ¤rd</th>
        </tr>
    </thead>
    <tbody>
        {% for leave in leaves %}
        <tr>
            <td>
                {% if leave.leave_type == 'vacation' %}
                    ğŸ–ï¸ Semester
                {% else %}
                    ğŸ¤’ Sjukdom
                {% endif %}
            </td>
            <td>{{ leave.start_date.strftime('%Y-%m-%d') }}</td>
            <td>{{ leave.end_date.strftime('%Y-%m-%d') }}</td>
            <td>{{ (leave.end_date - leave.start_date).days + 1 }}</td>
            <td>{{ leave.description or '-' }}</td>
            <td>
                <a href="{{ url_for('delete_leave', leave_id=leave.id) }}" 
                   class="btn btn-danger"
                   onclick="return confirm('Ã„r du sÃ¤ker pÃ¥ att du vill ta bort denna frÃ¥nvaro?')">
                    Ta bort
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p style="text-align: center; padding: 40px; color: #999;">Ingen frÃ¥nvaro registrerad Ã¤n.</p>
{% endif %}
{% endblock %}
